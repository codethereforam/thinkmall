# 业务逻辑分析

## 描述

分析角色、操作、步骤、反馈
字段/规则/输入提示/错误提示

## 角色

- 用户
- 管理员

## 后台（管理员）

- 登录
    - 字段列表与规则：
        - 用户名：
            - 规则：
                - 非空
            - 输入提示：
                - 用户名： 非空
            - 错误提示：
                - 请填写用户名
        - 密码：
            - 规则：
                - 非空
            - 输入提示：
                - 密码： 非空
            - 错误提示：
                - 请输入密码
        - 验证码：
            - 规则：
                - 非空
                - 点击更换
                - 4位
                - 不区分大小写
            - 输入提示：
                - 验证码： 非空
            - 错误提示：
                - 请输入验证码
                - 验证码错误
        - 登入按钮：
            - 规则：
                - 账户名与密码一致
                - 只能登录一次
            - 错误提示：
                - 您输入的密码和账户名不匹配
                - 您已登录
- 用户管理
    - 查看
    - 锁定
- 类别管理
    - 增
        - 字段列表与规则：
            - 名称
                - 规则
                    - 非空
                    - 1-20个字符
                    - 仅中、英文字母、数字和下划线(白名单)
                    - 不能重复
                - 输入提示
                    - 1-20个字符
                - 错误提示
                    - 后台
                        - 类别名称不能为空
                        - 类别名称长度应为1-20个字符
                        - 类别名称仅支持中英文、数字和下划线
                        - 已存在该类别
                    - 前端
                        - 请输入1-20个字符，仅支持中英文、数字和下划线
            - 描述
                - 规则
                    - 转义特殊字符(防止XSS)
                    - 小于255个字符
                - 输入提示
                    - 请输入255个字符以内
                - 错误提示
                    - 类别描述输入字符过多，超过255个字符
            - 父类别（隐藏字段）
                - 规则
                    - 非空
                    - 检查是否存在父类别
                - 输入提示
                - 错误提示
                    - 父类别非法操作，否则请联系管理员
            - 级别（隐藏字段）
                - 规则
                    - 非空
                    - 检查是否为有效级别
                - 输入提示
                - 错误提示
                    - 级别非法操作，否则请联系管理员
            - 是否启用
                - 规则
                    - 非空
                    - 检查是否为true/false
                - 输入提示
                - 错误提示
                    - 是否启用字段非法操作，否则请联系管理员
    - 改
        - 字段列表与规则：
            - 类别编号（隐藏字段）
                - 规则
                    - 检查是否存在
                - 输入提示
                - 错误提示
                    - 非法操作，否则请联系管理员
            - 名称
                - 和添加一致
            - 描述
                - 和添加一致
            - 父类别
                - 和添加一致
            - 级别（隐藏字段）
                - 和添加一致
                - 规则
                    - 不能降级(父类别级别要比自己原本级别小)
                - 输入提示
                - 错误提示
                    - 非法操作，否则请联系管理员
            - 是否启用
                - 和添加一致
            - 创建时间
                - 符合时间戳格式
    - 查
        - 树状展示
        - 根据启用状态筛选
            - 全部类别
            - 启用类别（默认）
    - 规则
        - 共3层
        - 只有第三层可以添加商品
        - 第三层不能添加子类别

- 商品管理
    - 增
    - 改
    - 查
    - 搜索
- 订单管理
    - 查
    - 改

## 前台（用户）

- 注册（添加用户）
- 登录
- 个人信息管理
    - 查看
    - 修改
- 收货地址
    - 增
    - 查
    - 改
- 类别
    - 查
- 商品
    - 查
    - 搜索
    - 购买
- 购物车
    - 添加购物项
    - 删除购物项
    - 修改
    - 查看
- 订单
    - 查看
    - 修改
        - 确认收货
        - 取消订单